# ChatGPT VSCode Nodejs Backend Extension

This is a Visual Studio Code extension for ChatGPT that was built using ChatGPT with a Nodejs backend for handling authentication.
The `README.md` file for this extension was generated by ChatGPT.

## Install the plugin from the [VSCode MarketPlace](https://marketplace.visualstudio.com/items?itemName=PhillipStrefling.chatgpt-vscode-nodejs-backend)

## Install the plugin from this [Github repository](https://github.com/circlenaut/chatgpt-vscode-nodejs-backend)
#### Commands:
- `cd extension` (navigate to the extension directory)
- `yarn setup` (installs project dependencies)
- `yarn compile` (generates js files)
- `yarn vscode:clean` (removes previous installs if any)
- `yarn vscode:package` (creates vscode installer package)
- `yarn vscode:install` (installs vscode package, please uninstall previous versions manually from the IDE)



## Features
#### Commands:
- `ChatGPT: Query` (will provide a prompt for you to ask a question)
- `ChatGPT: Add tests` (generates tests based on file/text selection)
- `ChatGPT: Why is my code broken?` (analyses your code to highlight any logic/syntax errors)
- `ChatGPT: Explain code`
- `ChatGPT: Refactor`
- `ChatGPT: Reset token` (clears access & clearance tokens if expired or having issues)

*Everything except Reset Token and Query are available from the context menu when right-clicking in the editor.*


![image](https://user-images.githubusercontent.com/38425102/206071229-f017247e-831b-4e42-8c1a-914851da392f.png)

## Usage

### Start the nodejs API backend (WIP)
- `cd api` (navigate to the API directory)
- Edit the copy `.env.example` -> `.env` and fill out with your credentials. Set `OPENAI_USE_GOOGLE=true` if your using a google account.
- `yarn setup` (installs backend dependencies)
- `yarn compile` (compiles the code)
- `yarn serve:ts` (starts the local server)

Please start the backend serve manually until I get VScode to properly send the start/stop console commands via the IDE interface.

#### Commands:
- `ChatGPT: Setup the backend API server` (setup the backend and browser authenticate)
- `ChatGPT: Add tests` (generates tests based on file/text selection)
- `ChatGPT: Why is my code broken?` (analyses your code to highlight any logic/syntax errors)
- `ChatGPT: Explain code`
- `ChatGPT: Refactor`
- `ChatGPT: Reset token` (clears access & clearance tokens if expired or having issues)

### Debugging
- Within VScode, go to `help` -> `Toggle Developer Tools` (or Ctrl-Shift-I) to monitor communications between VScode and the backend
- Visit the [backend](http://localhost:63450/api/chat-gpt) directly and its endpoints to carry out various functions (e.g `/login` to login to ChatGPT)

### Previous notes; may be relavent

To use the extension:
**This package requires a valid session token from ChatGPT to access it's unofficial REST API.**
Open the VS Code Command Palette and Type `ChatGPT: Reset token`, this will prompt you for your session token and as of 12/12/2022 you also need a clearance token.

To get the tokens:

1. Go to https://chat.openai.com/chat and log in or sign up (preferably in a browser other then Chrome, see below).
2. Open dev tools.
3. Open `Application` > `Cookies` (`Storage` > `Cookies` on FireFox)
   
![image](https://user-images.githubusercontent.com/38425102/207054121-dc87c625-a2f8-4ad6-92b7-9a52684d525c.png)
   
4. Copy the value for `__Secure-next-auth.session-token` & `cl_clearance` and enter it into the prompt from `ChatGPT: Reset token`
5. Go to the `Network` tab and select any request.
6. Copy the value for `user-agent` from the `Request Headers` and enter it into the prompt.

*Once you're logged in, you can ask ChatGPT any question and supply source code from your current file/selection.*

- Because of cloudflare, there are now several limitations, see [here](https://github.com/timkmecl/chatgpt-vscode#update-december-12-2022) for more.
- There are currently users who have issues even when following all of the above (see this [comment](https://github.com/timkmecl/chatgpt-vscode/issues/4#issuecomment-1350562961)). **If you're using Chrome to obtain the tokens, try using a different browser** (e.g. Brave), as it seems like using Chrome is often the cause of this.

## Support
If you need help using this extension, please open an issue on the GitHub repository for this extension.

## Credits
- [ChatGPT](https://chat.openai.com/chat) - The large language model trained by OpenAI that was used to generate this README file
- [chatgpt-api](https://github.com/transitive-bullshit/chatgpt-api/) - The NPM package used to query ChatGPT
- [chatgpt-vscode-nodejs-backend](https://github.com/barnesoir/chatgpt-vscode-nodejs-backend/) - The VScode extension used to structure this extension
- [mpociot's extension](https://github.com/mpociot/chatgpt-vscode) - Inspiration for the project and the original webview panel
- [Gencay's extension](https://github.com/gencay/vscode-chatgpt) - Ported version of Gencay's webview panel.
- [Yeoman](https://yeoman.io/) - The code generator used to scaffold the extension project
- [VS Code Extension Generator](https://github.com/Microsoft/vscode-generator-code) - The Yeoman generator for creating VS Code extensions
